{
  "code": "import { Admin, Animation2D, AudioAdmin, DataAdmin, Effects, TimerAdmin, Tools } from \"./Lwg\";\r\nimport { _Res } from \"./_PreLoad\";\r\nimport { _Start } from \"./_Start\";\r\nexport var _Ranking;\r\n(function (_Ranking) {\r\n    class _Data extends DataAdmin._Table {\r\n        constructor() {\r\n            super(...arguments);\r\n            this._otherPro = {\r\n                rankNum: 'rankNum',\r\n                fansNum: 'fansNum',\r\n                iconSkin: 'iconSkin',\r\n            };\r\n            this._classify = {\r\n                other: 'other',\r\n                self: 'self',\r\n            };\r\n        }\r\n        static _ins() {\r\n            if (!this.ins) {\r\n                this.ins = new _Data('RankingData', _Res._list.json.Ranking.dataArr, true);\r\n                if (!this.ins._arr[0]['iconSkin']) {\r\n                    for (let index = 0; index < this.ins._arr.length; index++) {\r\n                        const element = this.ins._arr[index];\r\n                        element['iconSkin'] = `Game/UI/Ranking/IconSkin/avatar_${element[this.ins._property.index]}.png`;\r\n                    }\r\n                }\r\n                this.ins._pitchName = '玩家';\r\n            }\r\n            return this.ins;\r\n        }\r\n    }\r\n    _Ranking._Data = _Data;\r\n    _Ranking._whereFrom = 'Start';\r\n    class Ranking extends Admin._SceneBase {\r\n        lwgOnAwake() {\r\n            _Data._ins()._List = this._ListVar('List');\r\n            if (_Ranking._whereFrom === 'MakePattern') {\r\n                _Data._ins()._addAllProPerty(_Data._ins()._otherPro.fansNum, () => {\r\n                    return Tools._Number.randomOneInt(100, 150);\r\n                });\r\n                const obj = _Data._ins()._getPitchObj();\r\n                obj[_Data._ins()._otherPro.fansNum] += Tools._Number.randomOneInt(115, 383);\r\n            }\r\n            _Data._ins()._sortByProperty(_Data._ins()._otherPro.fansNum, _Data._ins()._otherPro.rankNum);\r\n            this._evNotify(_Start._Event.updateRanking);\r\n            _Data._ins()._listRender = (Cell, index) => {\r\n                const data = Cell.dataSource;\r\n                const Board = Cell.getChildByName('Board');\r\n                if (data[_Data._ins()._property.classify] === _Data._ins()._classify.self) {\r\n                    Board.skin = `Game/UI/Ranking/x_di.png`;\r\n                }\r\n                else {\r\n                    Board.skin = `Game/UI/Ranking/w_di.png`;\r\n                }\r\n                const RankNum = Cell.getChildByName('RankNum');\r\n                RankNum.text = String(data[_Data._ins()._otherPro.rankNum]);\r\n                const FansNum = Cell.getChildByName('FansNum');\r\n                FansNum.text = String(data[_Data._ins()._otherPro.fansNum]);\r\n                const Name = Cell.getChildByName('Name');\r\n                Name.text = data[_Data._ins()._property.name];\r\n                const IconPic = Cell.getChildByName('Icon').getChildAt(0);\r\n                IconPic.skin = data[_Data._ins()._otherPro.iconSkin];\r\n            };\r\n        }\r\n        lwgOpenAni() {\r\n            if (_Ranking._whereFrom === 'MakePattern') {\r\n                AudioAdmin._playVictorySound();\r\n                this._ImgVar('Background').alpha = 0;\r\n                this._ImgVar('Content').scale(0.5, 0.5);\r\n                Animation2D.bombs_Appear(this._ImgVar('Content'), 0, 1, 1.2, 0, 350, null, 0);\r\n                Animation2D.fadeOut(this._ImgVar('Background'), 0, 1, 350);\r\n            }\r\n            else {\r\n                this._ImgVar('Background').alpha = 0;\r\n                this._ImgVar('Content').alpha = 0;\r\n                Animation2D.fadeOut(this._ImgVar('Background'), 0, 1, 350);\r\n                Animation2D.fadeOut(this._ImgVar('Content'), 0, 1, 200);\r\n            }\r\n            return 100;\r\n        }\r\n        lwgOnStart() {\r\n            _Data._ins()._scrollToLast(10);\r\n            if (_Ranking._whereFrom === 'MakePattern') {\r\n                _Data._ins()._tweenToPitch(1500);\r\n                const centerP1 = new Laya.Point(Laya.stage.width / 2, 0);\r\n                const num1 = 150;\r\n                TimerAdmin._frameNumRandomLoop(1, 3, num1, this, () => {\r\n                    Effects._Particle._fallingRotate(Laya.stage, centerP1, [Laya.stage.width, 0], [10, 30], [10, 30], [Effects._SkinUrl.矩形1, Effects._SkinUrl.矩形2, Effects._SkinUrl.矩形3], null, [300, Laya.stage.height], [1, 8]);\r\n                });\r\n                const num2 = 16;\r\n                const centerP2 = new Laya.Point(Laya.stage.width / 2, Laya.stage.height / 2 - 50);\r\n                TimerAdmin._frameNumRandomLoop(10, 25, num2, this, () => {\r\n                    const count = Tools._Number.randomOneInt(10, 20);\r\n                    const time = 30;\r\n                    const dis = Tools._Number.randomOneInt(100, 300);\r\n                    const radomP = Tools._Point.randomPointByCenter(centerP2, 500, 150)[0];\r\n                    for (let index = 0; index < count * 2; index++) {\r\n                        Effects._Particle._sprayRound(Laya.stage, radomP, null, [20, 40], null, [Effects._SkinUrl.花4], null, [dis, dis], [time, time]);\r\n                    }\r\n                    for (let index = 0; index < count * 2; index++) {\r\n                        Effects._Particle._sprayRound(Laya.stage, radomP, null, [20, 40], null, [Effects._SkinUrl.花4], null, [50, dis - 20], [time, time]);\r\n                    }\r\n                });\r\n                _Ranking._whereFrom = 'Start';\r\n            }\r\n            else {\r\n                _Data._ins()._tweenToPitch(800);\r\n            }\r\n        }\r\n        lwgButton() {\r\n            this._btnUp(this._ImgVar('BtnClose'), () => {\r\n                this._closeScene();\r\n            });\r\n        }\r\n    }\r\n    _Ranking.Ranking = Ranking;\r\n})(_Ranking || (_Ranking = {}));\r\nexport default _Ranking.Ranking;\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Project_Laya2.9.0/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts",
    "D:/Game/project/3DDressUp/Project_Laya2.9.0/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_PreLoad.ts",
    "D:/Game/project/3DDressUp/Project_Laya2.9.0/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_Start.ts"
  ]
}
