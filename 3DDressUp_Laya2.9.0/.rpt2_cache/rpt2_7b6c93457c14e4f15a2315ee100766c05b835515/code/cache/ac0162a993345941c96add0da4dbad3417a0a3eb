{
  "code": "import { TimerAdmin, Tools } from \"./Lwg\";\r\nimport { _MakeTailor } from \"./_MakeTailor\";\r\nimport { _Res } from \"./_PreLoad\";\r\nexport var _3D;\r\n(function (_3D) {\r\n    class _Scene {\r\n        constructor() {\r\n            this.aniName = {\r\n                Stand: 'Stand',\r\n                Pose1: 'Pose1',\r\n                Pose2: 'Pose2',\r\n                DispalyCloth: 'DispalyCloth',\r\n                Walk: 'Walk',\r\n            };\r\n        }\r\n        static _ins() {\r\n            if (!this.ins) {\r\n                this.ins = new _Scene();\r\n                this.ins._Owner = _Res._list.scene3D.MakeClothes.Scene;\r\n                Laya.stage.addChild(this.ins._Owner);\r\n                this.ins._Role = this.ins._Owner.getChildByName('Role');\r\n                this.ins._RoleFPos = new Laya.Vector3(this.ins._Role.transform.position.x, this.ins._Role.transform.position.y, this.ins._Role.transform.position.z);\r\n                this.ins._Root = this.ins._Role.getChildByName('Root');\r\n                this.ins._DIY = this.ins._Root.getChildByName('DIY');\r\n                this.ins._General = this.ins._Root.getChildByName('General');\r\n                this.ins._DBottoms = this.ins._DIY.getChildByName('Bottoms');\r\n                this.ins._DTop = this.ins._DIY.getChildByName('Top');\r\n                this.ins._DDress = this.ins._DIY.getChildByName('Dress');\r\n                this.ins._GBottoms = this.ins._General.getChildByName('Bottoms');\r\n                this.ins._GTop = this.ins._General.getChildByName('Top');\r\n                this.ins._GDress = this.ins._General.getChildByName('Dress');\r\n                this.ins._RoleAni = this.ins._Role.getComponent(Laya.Animator);\r\n                this.ins._MainCamara = this.ins._Owner.getChildByName('Main Camera');\r\n                this.ins._MirrorCamera = this.ins._Owner.getChildByName('MirrorCamera');\r\n                this.ins._Mirror = this.ins._Owner.getChildByName('Mirror');\r\n                this.ins._Bg1 = this.ins._Owner.getChildByName('Bg1');\r\n                this.ins._Bg2 = this.ins._Owner.getChildByName('Bg2');\r\n                this.ins._BtnDress = this.ins._Owner.getChildByName('BtnDress');\r\n                this.ins._BtnTop = this.ins._Owner.getChildByName('BtnTop');\r\n                this.ins._BtnBottoms = this.ins._Owner.getChildByName('BtnBottoms');\r\n                this.ins._BtnDressingRoom = this.ins._Owner.getChildByName('BtnDressingRoom');\r\n                this.ins._DIYHanger = this.ins._Owner.getChildByName('DIYHanger');\r\n            }\r\n            return this.ins;\r\n        }\r\n        playDispalyAni() {\r\n            this._RoleAni.play(this.aniName.Stand);\r\n            this._RoleAni.play(this.aniName.DispalyCloth);\r\n            Laya.timer.clearAll(this._Role);\r\n            TimerAdmin._once(3200, this._Role, () => {\r\n                this._RoleAni.crossFade(this.aniName.Stand, 0.3);\r\n            });\r\n        }\r\n        playPoss1Ani() {\r\n            this._RoleAni.crossFade(this.aniName.Pose1, 0.3);\r\n            Laya.timer.clearAll(this._Role);\r\n            TimerAdmin._once(3200, this._Role, () => {\r\n                this._RoleAni.crossFade(this.aniName.Stand, 0.3);\r\n            });\r\n        }\r\n        playPoss2Ani() {\r\n            this._RoleAni.crossFade(this.aniName.Pose2, 0.3);\r\n            Laya.timer.clearAll(this._Role);\r\n            TimerAdmin._once(3200, this._Role, () => {\r\n                this._RoleAni.crossFade(this.aniName.Stand, 0.3);\r\n            });\r\n        }\r\n        playStandAni() {\r\n            Laya.timer.clearAll(this);\r\n            Laya.timer.clearAll(this._Role);\r\n            this._RoleAni.crossFade(this.aniName.Stand, 0.3);\r\n        }\r\n        playRandomPose() {\r\n            TimerAdmin._frameLoop(450, this, () => {\r\n                Tools._Number.randomOneHalf() == 0 ? _3D._Scene._ins().playPoss1Ani() : _3D._Scene._ins().playPoss2Ani();\r\n            }, true);\r\n        }\r\n        get btnDressPos() {\r\n            return Tools._3D.posToScreen(this._BtnDress.transform.position, this._MainCamara);\r\n        }\r\n        get btnTopPos() {\r\n            return Tools._3D.posToScreen(this._BtnTop.transform.position, this._MainCamara);\r\n        }\r\n        get btnBottomsPos() {\r\n            return Tools._3D.posToScreen(this._BtnBottoms.transform.position, this._MainCamara);\r\n        }\r\n        get btnDressingRoomPos() {\r\n            return Tools._3D.posToScreen(this._BtnDressingRoom.transform.position, this._MainCamara);\r\n        }\r\n        openStartAni(func) {\r\n            func();\r\n            this.playRandomPose();\r\n            this._DIYHanger.active = false;\r\n            this._Role.active = true;\r\n            this._MirrorCamera.active = false;\r\n        }\r\n        intoStart() {\r\n            _3D._Scene._ins().playStandAni();\r\n            _3D._Scene._ins()._Owner.active = true;\r\n            this._MirrorCamera.active = false;\r\n            this._Bg1.meshRenderer.material.albedoTexture = _Res._list.texture2D.bgStart.texture2D;\r\n        }\r\n        intogeDressingRoom() {\r\n            _3D._Scene._ins().playStandAni();\r\n            this._MirrorCamera.active = true;\r\n            this._Bg1.meshRenderer.material.albedoTexture = _Res._list.texture2D.bgDressingRoom.texture2D;\r\n        }\r\n        createMirror(_Sp) {\r\n            this._MirrorCamera.renderTarget = new Laya.RenderTexture(_Sp.width, _Sp.height);\r\n            this._MirrorCamera.renderingOrder = -1;\r\n            this._MirrorCamera.clearFlag = Laya.CameraClearFlags.Sky;\r\n            this.mirrortex && this.mirrortex.destroy();\r\n            this.mirrortex = new Laya.Texture(this._MirrorCamera.renderTarget, Laya.Texture.DEF_UV);\r\n            _Sp.graphics.drawTexture(this.mirrortex);\r\n        }\r\n        intoMakePattern() {\r\n            _3D._Scene._ins()._Owner.active = true;\r\n            _3D.DIYCloth._ins().remake();\r\n            this._Bg1.meshRenderer.material.albedoTexture = _Res._list.texture2D.bgMakePattern.texture2D;\r\n        }\r\n        intoMakeTailor() {\r\n            _3D._Scene._ins()._Owner.active = false;\r\n        }\r\n        photoBg() {\r\n            this._Bg1.meshRenderer.material.albedoTexture = _Res._list.texture2D.bgPhoto.texture2D;\r\n        }\r\n        displayDress() {\r\n            this._GBottoms.active = this._GTop.active = this._DBottoms.active = this._DTop.active = false;\r\n        }\r\n        displayTopAndBotton() {\r\n            this._GDress.active = this._DDress.active = false;\r\n        }\r\n    }\r\n    _3D._Scene = _Scene;\r\n    class DIYCloth {\r\n        constructor() {\r\n        }\r\n        static _ins() {\r\n            if (!this.ins) {\r\n                this.ins = new DIYCloth();\r\n            }\r\n            return this.ins;\r\n        }\r\n        remake() {\r\n            _Scene._ins()._DIYHanger.active = true;\r\n            _Scene._ins()._Role.active = false;\r\n            const Classify = _Scene._ins()._DIYHanger.getChildByName(_MakeTailor._DIYClothes._ins()._pitchClassify);\r\n            Tools._Node.showExcludedChild3D(_3D._Scene._ins()._DIYHanger, [Classify.name]);\r\n            this.Present = Classify.getChildByName(_MakeTailor._DIYClothes._ins()._pitchName);\r\n            Tools._Node.showExcludedChild3D(Classify, [this.Present.name]);\r\n            this.Present.transform.localRotationEulerY = 180;\r\n            this.Front = this.Present.getChildByName(`${this.Present.name}_0`);\r\n            this.Reverse = this.Present.getChildByName(`${this.Present.name}_1`);\r\n            this.ModelTap = this.Present.getChildByName('ModelTap');\r\n            let center = this.Front.meshRenderer.bounds.getCenter();\r\n            let extent = this.Front.meshRenderer.bounds.getExtent();\r\n            let p1 = new Laya.Vector3(center.x, center.y + extent.y, center.z);\r\n            let p2 = new Laya.Vector3(center.x, center.y - extent.y, center.z);\r\n            let point1 = Tools._3D.posToScreen(p1, _Scene._ins()._MainCamara);\r\n            let point2 = Tools._3D.posToScreen(p2, _Scene._ins()._MainCamara);\r\n            this.texHeight = point2.y - point1.y;\r\n        }\r\n        addTexture2D(arr) {\r\n            const bMF = this.Front.meshRenderer.material;\r\n            bMF.albedoTexture && bMF.albedoTexture.destroy();\r\n            bMF.albedoTexture = arr[0];\r\n            const bMR = this.Reverse.meshRenderer.material;\r\n            bMR.albedoTexture && bMR.albedoTexture.destroy();\r\n            bMR.albedoTexture = arr[1];\r\n        }\r\n        rotate(num) {\r\n            if (num == 1) {\r\n                this.Present.transform.localRotationEulerY++;\r\n            }\r\n            else {\r\n                this.Present.transform.localRotationEulerY--;\r\n            }\r\n        }\r\n    }\r\n    _3D.DIYCloth = DIYCloth;\r\n})(_3D || (_3D = {}));\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg3D.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_MakeTailor.ts",
    "D:/Game/project/3DDressUp/Copy/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_PreLoad.ts"
  ]
}
