{
  "code": "import { Admin, Tools } from \"./Lwg\";\r\nimport { lwg3D } from \"./Lwg3D\";\r\nimport { _Res } from \"./_PreLoad\";\r\nexport var _MakeUp;\r\n(function (_MakeUp) {\r\n    let _Event;\r\n    (function (_Event) {\r\n        _Event[\"posCalibration\"] = \"posCalibration\";\r\n        _Event[\"addTexture2D\"] = \"addTexture2D\";\r\n    })(_Event = _MakeUp._Event || (_MakeUp._Event = {}));\r\n    class MakeUp extends Admin._SceneBase {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.Make = {\r\n                switch: true,\r\n                frontPos: null,\r\n                endPos: null,\r\n                DrawSp: null,\r\n                present: null,\r\n                color: null,\r\n                size: 20,\r\n                draw: (Sp, x, y, tex, color) => {\r\n                },\r\n                getTex: (element) => {\r\n                    return element.drawToTexture(element.width, element.height, element.x, element.y);\r\n                },\r\n            };\r\n        }\r\n        lwgOnStart() {\r\n            _MakeUp._Scene3D = _Res._list.scene3D.MakeUp.Scene;\r\n            if (!_MakeUp._Scene3D.getComponent(MakeUp3D)) {\r\n                _MakeUp._Scene3D.addComponent(MakeUp3D);\r\n            }\r\n            else {\r\n                _MakeUp._Scene3D.getComponent(MakeUp3D).lwgOnStart();\r\n            }\r\n            this._evNotify(_Event.addTexture2D, [this._ImgVar('Glasses1').name, this.Make.getTex(this._ImgVar('Glasses1')).bitmap]);\r\n            this._evNotify(_Event.addTexture2D, [this._ImgVar('Glasses2').name, this.Make.getTex(this._ImgVar('Glasses2')).bitmap]);\r\n        }\r\n        lwgOpenAni() {\r\n            return 100;\r\n        }\r\n        lwgEventRegister() {\r\n            this._evReg(_Event.posCalibration, (p1, p2) => {\r\n                this._ImgVar('Glasses1').pos(p1.x - this._ImgVar('Glasses1').width / 2, p1.y - this._ImgVar('Glasses1').height / 2);\r\n                this._ImgVar('Glasses2').pos(p2.x - this._ImgVar('Glasses2').width / 2, p2.y - this._ImgVar('Glasses1').height / 2);\r\n            });\r\n        }\r\n        lwgBtnRegister() {\r\n            for (let index = 0; index < this._ImgVar('Case').numChildren; index++) {\r\n                const element = this._ImgVar('Case').getChildAt(index);\r\n                this._btnUp(element, (e) => {\r\n                    this.Make.color = element.getChildAt(0).text;\r\n                    this.Make.switch = true;\r\n                });\r\n            }\r\n            for (let index = 0; index < this._ImgVar('Glasses').numChildren; index++) {\r\n                const element = this._ImgVar('Glasses').getChildAt(index);\r\n                let DrawBoard1 = new Laya.Sprite;\r\n                DrawBoard1.width = element.width;\r\n                DrawBoard1.height = element.height;\r\n                DrawBoard1.name = 'DrawBoard';\r\n                element.addChild(DrawBoard1);\r\n                this._btnFour(element, (e) => {\r\n                    if (this.Make.switch) {\r\n                        this.Make.frontPos = element.globalToLocal(new Laya.Point(e.stageX, e.stageY));\r\n                        this.Make.present = element;\r\n                        this.Make.DrawSp = new Laya.Sprite;\r\n                        let _DrawBoard = element.getChildByName('DrawBoard');\r\n                        _DrawBoard.addChild(this.Make.DrawSp);\r\n                    }\r\n                }, (e) => {\r\n                    if (this.Make.DrawSp && this.Make.present == element) {\r\n                        this.Make.endPos = element.globalToLocal(new Laya.Point(e.stageX, e.stageY));\r\n                        this.Make.DrawSp.graphics.drawCircle(this.Make.endPos.x, this.Make.endPos.y, this.Make.size / 2, this.Make.color);\r\n                        this.Make.DrawSp.graphics.drawLine(this.Make.frontPos.x, this.Make.frontPos.y, this.Make.endPos.x, this.Make.endPos.y, this.Make.color, this.Make.size);\r\n                        this.Make.frontPos = this.Make.endPos;\r\n                        this._evNotify(_Event.addTexture2D, [element.name, this.Make.getTex(element).bitmap]);\r\n                    }\r\n                }, (e) => {\r\n                    let _DrawBoard = element.getChildByName('DrawBoard');\r\n                    if (_DrawBoard) {\r\n                        let NewBoard = element.addChild((new Laya.Sprite()).pos(0, 0));\r\n                        NewBoard.width = _DrawBoard.width;\r\n                        NewBoard.height = _DrawBoard.height;\r\n                        NewBoard.name = 'DrawBoard';\r\n                        NewBoard.texture = _DrawBoard.drawToTexture(_DrawBoard.width, _DrawBoard.height, _DrawBoard.x, _DrawBoard.y);\r\n                        _DrawBoard.removeSelf();\r\n                    }\r\n                }, (e) => {\r\n                }, null);\r\n            }\r\n            this._btnUp(this._ImgVar('BtnNext'), () => {\r\n                this._openScene('Start', true, true);\r\n            });\r\n        }\r\n        onStageMouseDown(e) {\r\n            this.Make.switch = true;\r\n            if (this.Make.color) {\r\n            }\r\n        }\r\n        onStageMouseMove(e) {\r\n        }\r\n        onStageMouseUp() {\r\n        }\r\n    }\r\n    _MakeUp.MakeUp = MakeUp;\r\n    class MakeUp3D extends lwg3D._Scene3DBase {\r\n        lwgOnAwake() {\r\n        }\r\n        lwgOnStart() {\r\n            let p1 = Tools._3D.posToScreen(this._Child('Glasses1').transform.position, this._MainCamera);\r\n            let p2 = Tools._3D.posToScreen(this._Child('Glasses2').transform.position, this._MainCamera);\r\n            this._evNotify(_Event.posCalibration, [p1, p2]);\r\n        }\r\n        lwgEventRegister() {\r\n            this._evReg(_Event.addTexture2D, (name, Text2D) => {\r\n                let bMaterial = this._Child(name).meshRenderer.material;\r\n                bMaterial.albedoTexture.destroy();\r\n                bMaterial.albedoTexture = Text2D;\r\n            });\r\n        }\r\n    }\r\n    _MakeUp.MakeUp3D = MakeUp3D;\r\n})(_MakeUp || (_MakeUp = {}));\r\nexport default _MakeUp.MakeUp3D;\r\n",
  "references": [
    "D:/Game/project/3DDressUp/Project_Laya2.9.0/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg.ts",
    "D:/Game/project/3DDressUp/Project_Laya2.9.0/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/Lwg3D.ts",
    "D:/Game/project/3DDressUp/Project_Laya2.9.0/3DDressUp_Laya2.9.0/3DDressUp_Laya2.9.0/src/script/Lwg/_PreLoad.ts"
  ]
}
